{% extends 'base.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    <!-- DataTables -->
    <link href="{{ asset('/mercurio/public/temporal/plugins/datatables/jquery.dataTables.min.css') }}" rel="stylesheet" type="text/css"/>
    <link href="{{ asset('/mercurio/public/temporal/plugins/datatables/buttons.bootstrap.min.css') }}" rel="stylesheet" type="text/css"/>
    <link href="{{ asset('/mercurio/public/temporal/plugins/datatables/fixedHeader.bootstrap.min.css') }}" rel="stylesheet" type="text/css"/>
    <link href="{{ asset('/mercurio/public/temporal/plugins/datatables/responsive.bootstrap.min.css') }}" rel="stylesheet" type="text/css"/>
    <link href="{{ asset('/mercurio/public/temporal/plugins/datatables/scroller.bootstrap.min.css') }}" rel="stylesheet" type="text/css"/>
    <link href="{{ asset('/mercurio/public/temporal/plugins/datatables/dataTables.colVis.css') }}" rel="stylesheet" type="text/css"/>
    <link href="{{ asset('/mercurio/public/temporal/plugins/datatables/dataTables.bootstrap.min.css') }}" rel="stylesheet" type="text/css"/>
    <link href="{{ asset('/mercurio/public/temporal/plugins/datatables/fixedColumns.dataTables.min.css') }}" rel="stylesheet" type="text/css"/>
{% endblock %}
{% block bodyAtt %}class="fixed-left"{% endblock %}

{% block body %}

    <div id="wrapper">
    {{ include('Bloques/menu.html.twig') }}

    {{ include('Bloques/menuIzquierdo.html.twig') }}
    <div class="content-page">
    <!-- Start content -->
        <div class="content">
            <div class="container">
                {% block content %}
                <div class="row">
                    <div class="col-xs-12">
                        <div class="page-title-box">
                            <h4 class="page-title" style="padding-right: 10px;">Casos o Incidencias - General</h4>
                            {#<span class="label label-danger">Pendientes: {{ pendientes }}</span>#}
                            {#<span class="label label-info">Atendidas Pendientes: {{ atendidasPendientes }}</span>#}
                            <a href="{{ path('registrarCaso') }}">
                                <button class="btn btn-success btn-bordered waves-effect waves-light" style="float: right;"><span class="mdi mdi-plus"></span> Nuevo</button>
                            </a>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="card-box">
                            <div class="table-responsive">
                                {#{{form_start(form) }}#}
                                {#<div class="card-box">#}
                                    {#<div class="col-sm-11">#}
                                        {#{{ form_widget(formFiltro.clienteRel) }}#}
                                    {#</div>#}
                                    {#<div>#}
                                        {#{{ form_widget(formFiltro.btnFiltrar) }}#}
                                    {#</div>#}
                                {#</div>#}
                                <table class="table table-hover m-0 table-oro">

                                    <thead>
                                    <tr>
                                        <th>Id</th>
                                        <th>Fecha</th>
                                        {#<th>Asunto</th>#}
                                        <th>Cliente</th>
                                        <th>Soporte</th>
                                        {#<th>Correo</th>#}
                                        <th>Contacto</th>
                                        {#<th>Teléfono</th>#}
                                        {#<th>Ext.</th>#}
                                        <th>Categoría</th>
                                        <th>Descripción</th>
                                        <th>Prioridad</th>
                                        {#<th>Gestión</th>#}
                                        {#<th>Gestiona</th>#}
                                        {#<th>Solución</th>#}
                                        {#<th>Soluciona</th>#}
                                        {#<th>At</th>#}
                                        {#<th>So</th>#}
                                        {#<th>Ed</th>#}
                                        <th>Ver</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <form action="{{ path('registrarCaso') }}">
                                    {% for caso in casos %}
                                        <tr>
                                            <td>{{ caso.codigoCasoPk }}</td>
                                            <td>{{ caso.fechaRegistro|date('y-m-d') }}</td>
                                            {#<td>{{ caso.asunto }}</td>#}
                                            <td>
                                                <strong>{{ caso.empresa }}</strong>
                                            </td>
                                            <td>{{ caso.soporte|default('-') }}</td>
                                            <td title="Correo: {{ caso.correo }} | Teléfono: {{ caso.telefono }} - ({{ caso.extension }})">{{ caso.contacto }}</td>
                                            <td>
                                                <span class="label" style="background-color: {{ caso.categoriaColor }};">{{ caso.categoria }}</span>
                                            </td>
                                            <td><strong>{{ caso.asunto }}</strong> - {{ caso.descripcion }}</td>
                                            <td>
                                                {#<span class="label" style="background-color: {% if caso.prioridad.color != null %} {{ caso.prioridad.color }} {% else %} #efefef {% endif %};">#}
                                                <span class="label" style="background-color: {{ caso.prioridadColor }};">
                                                    {% if caso.prioridad is defined or caso.prioridad != null %}
                                                        {{ caso.prioridad }}
                                                    {% else %}
                                                        Sin prioridad
                                                    {% endif %}
                                                </span>
                                            </td>
                                            <td>
                                                <a href="{{ path('casoDetalle', { 'codigoCaso':  caso.codigoCasoPk }) }}"
                                                   class="btn btn-info waves-effect waves-light btn-xs"><i
                                                            class="glyphicon glyphicon-eye-open"
                                                            style="padding: 3px;"></i>
                                                </a>
                                            </td>
                                            <td>
                                                {% if not caso.estadoAtendido %}
                                                    <a href="{{ path('registrarCaso', { 'codigoCaso':  caso.codigoCasoPk }) }}"
                                                       class="btn btn-success waves-effect waves-light btn-xs"><i
                                                                class="glyphicon glyphicon-chevron-left"
                                                                style="padding: 3px;"></i>
                                                    </a>
                                                {% else %}
                                                <button class="btn btn-danger btn-xs" type="submit" name="registrarCaso" disabled value="{{ caso.codigoCasoPk }}" style="padding: 3px;">
                                                <i class="glyphicon glyphicon-chevron-down"></i></button>
                                                {% endif %}
                                            </td>
                                            {#<td>#}
                                                {#{% if caso.estado_atendido %}#}
                                                    {#<button class="btn btn-success btn-xs" type="submit" name="casoAtender" disabled value="{{ caso.codigo_caso_pk }}">#}
                                                        {#<i class="glyphicon glyphicon-thumbs-up"></i></button>#}
                                                {#{% else %}#}
                                                    {#<button class="btn btn-danger btn-xs" type="submit" name="casoAtender"  value="{{ caso.codigo_caso_pk }}">#}
                                                        {#<i class="glyphicon glyphicon-thumbs-down"></i></button>#}
                                                {#{% endif %}#}
                                            {#</td>#}
                                            {#<td>#}
                                                {#{% if caso.estado_solucionado == false and caso.estado_atendido or caso.estado_atendido == false and caso.estados_solucionado == false %}#}
                                                    {#<button class="btn btn-danger btn-xs" type="submit" name="casoSolucionar" value="{{ caso.codigo_caso_pk }}" {% if caso.estado_atendido == false %} disabled {% endif %} >#}
                                                        {#<i class="glyphicon glyphicon-thumbs-down"></i></button>#}
                                                {#{% else %}#}
                                                    {#<button class="btn btn-success btn-xs" type="submit" name="casoSolucionar" disabled value="{{ caso.codigoCasoPk }}"  title="{{caso.codigoUsuarioSolucionaFk}}">#}
                                                        {#<i class="glyphicon glyphicon-thumbs-up"></i></button>#}
                                                {#{% endif %}#}
                                            {#</td>#}
                                            {#<td>#}
                                                {#{% if caso.estadoSolucionado == false and caso.estadoAtendido == false%}#}
                                                    {#<a href="{{ path('registrarCaso', { 'codigoCaso':  caso.codigoCasoPk }) }}"#}
                                                       {#class="btn btn-purple waves-effect waves-light btn-xs m-b-5"><i class="glyphicon glyphicon-pencil" style="padding: 3px;"></i>#}
                                                    {#</a>#}
                                                {#{% else %}#}
                                                    {#<a href="{{ path('registrarCaso', { 'codigoCaso':  caso.codigoCasoPk }) }}" onclick="return false" disabled=""#}
                                                       {#class="btn btn-purple waves-effect waves-light btn-xs m-b-5"><i class="glyphicon glyphicon-pencil" style="padding: 3px;"></i>#}
                                                    {#</a>#}
                                                {#{% endif %}#}
                                            {#</td>#}
                                        </tr>
                                    {% endfor %}
                                    {#{{ form_end(form) }}#}
                                    </form>
                                    </tbody>
                                </table>
                            </div> <!-- end card -->
                    </div>
                    <!-- end col -->
                        {% endblock content %}
                    </div> <!-- container -->
                </div> <!-- content -->
                <div class="row">
                    <div class="col-sm-12">
                        <div class="card-box table-responsive">

                            <h4 class="m-t-0 header-title"><b>KeyTable example</b></h4>
                            <p class="text-muted font-13 m-b-30">
                                KeyTable provides Excel like cell navigation on any table. Events (focus, blur, action
                                etc) can be assigned to individual cells, columns, rows or all cells.
                            </p>

                            <div id="datatable-keytable_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer"><div class="row"><div class="col-sm-6"><div class="dataTables_length" id="datatable-keytable_length"><label>Show <select name="datatable-keytable_length" aria-controls="datatable-keytable" class="form-control input-sm"><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select> entries</label></div></div><div class="col-sm-6"><div id="datatable-keytable_filter" class="dataTables_filter"><label>Search:<input type="search" class="form-control input-sm" placeholder="" aria-controls="datatable-keytable"></label></div></div></div><div class="row"><div class="col-sm-12"><div style="position: absolute; height: 1px; width: 0px; overflow: hidden;"><input type="text" tabindex="0"></div><table id="datatable-keytable" class="table table-striped table-bordered dataTable no-footer" role="grid" aria-describedby="datatable-keytable_info" style="position: relative;">
                                <thead>
                                <tr role="row"><th class="sorting" tabindex="0" aria-controls="datatable-keytable" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 271px;">Name</th><th class="sorting_asc" tabindex="0" aria-controls="datatable-keytable" rowspan="1" colspan="1" aria-label="Position: activate to sort column descending" aria-sort="ascending" style="width: 441px;">Position</th><th class="sorting" tabindex="0" aria-controls="datatable-keytable" rowspan="1" colspan="1" aria-label="Office: activate to sort column ascending" style="width: 200px;">Office</th><th class="sorting" tabindex="0" aria-controls="datatable-keytable" rowspan="1" colspan="1" aria-label="Age: activate to sort column ascending" style="width: 100px;">Age</th><th class="sorting" tabindex="0" aria-controls="datatable-keytable" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending" style="width: 181px;">Start date</th><th class="sorting" tabindex="0" aria-controls="datatable-keytable" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending" style="width: 168px;">Salary</th></tr>
                                </thead>
                                <tbody><tr role="row" class="odd">
                                    <td class="">Airi Satou</td>
                                    <td class="sorting_1">Accountant</td>
                                    <td>Tokyo</td>
                                    <td>33</td>
                                    <td>2008/11/28</td>
                                    <td>$162,700</td>
                                </tr><tr role="row" class="even">
                                    <td class="">Garrett Winters</td>
                                    <td class="sorting_1">Accountant</td>
                                    <td>Tokyo</td>
                                    <td>63</td>
                                    <td>2011/07/25</td>
                                    <td>$170,750</td>
                                </tr><tr role="row" class="odd">
                                    <td class="">Angelica Ramos</td>
                                    <td class="sorting_1">Chief Executive Officer (CEO)</td>
                                    <td>London</td>
                                    <td>47</td>
                                    <td>2009/10/09</td>
                                    <td>$1,200,000</td>
                                </tr><tr role="row" class="even">
                                    <td class="">Paul Byrd</td>
                                    <td class="sorting_1">Chief Financial Officer (CFO)</td>
                                    <td>New York</td>
                                    <td>64</td>
                                    <td>2010/06/09</td>
                                    <td>$725,000</td>
                                </tr><tr role="row" class="odd">
                                    <td class="">Yuri Berry</td>
                                    <td class="sorting_1">Chief Marketing Officer (CMO)</td>
                                    <td>New York</td>
                                    <td>40</td>
                                    <td>2009/06/25</td>
                                    <td>$675,000</td>
                                </tr><tr role="row" class="even">
                                    <td class="">Fiona Green</td>
                                    <td class="sorting_1">Chief Operating Officer (COO)</td>
                                    <td>San Francisco</td>
                                    <td>48</td>
                                    <td>2010/03/11</td>
                                    <td>$850,000</td>
                                </tr><tr role="row" class="odd">
                                    <td class="">Donna Snider</td>
                                    <td class="sorting_1">Customer Support</td>
                                    <td>New York</td>
                                    <td>27</td>
                                    <td>2011/01/25</td>
                                    <td>$112,000</td>
                                </tr><tr role="row" class="even">
                                    <td class="">Serge Baldwin</td>
                                    <td class="sorting_1">Data Coordinator</td>
                                    <td>Singapore</td>
                                    <td>64</td>
                                    <td>2012/04/09</td>
                                    <td>$138,575</td>
                                </tr><tr role="row" class="odd">
                                    <td class="">Gavin Joyce</td>
                                    <td class="sorting_1">Developer</td>
                                    <td>Edinburgh</td>
                                    <td>42</td>
                                    <td>2010/12/22</td>
                                    <td>$92,575</td>
                                </tr><tr role="row" class="even">
                                    <td class="">Jonas Alexander</td>
                                    <td class="sorting_1">Developer</td>
                                    <td>San Francisco</td>
                                    <td>30</td>
                                    <td>2010/07/14</td>
                                    <td>$86,500</td>
                                </tr></tbody>
                            </table></div></div><div class="row"><div class="col-sm-6"><div class="dataTables_info" id="datatable-keytable_info" role="status" aria-live="polite">Showing 1 to 10 of 57 entries</div></div><div class="col-sm-6"><div class="dataTables_paginate paging_simple_numbers" id="datatable-keytable_paginate"><ul class="pagination"><li class="paginate_button previous disabled" aria-controls="datatable-keytable" tabindex="0" id="datatable-keytable_previous"><a href="#">Previous</a></li><li class="paginate_button active" aria-controls="datatable-keytable" tabindex="0"><a href="#">1</a></li><li class="paginate_button " aria-controls="datatable-keytable" tabindex="0"><a href="#">2</a></li><li class="paginate_button " aria-controls="datatable-keytable" tabindex="0"><a href="#">3</a></li><li class="paginate_button " aria-controls="datatable-keytable" tabindex="0"><a href="#">4</a></li><li class="paginate_button " aria-controls="datatable-keytable" tabindex="0"><a href="#">5</a></li><li class="paginate_button " aria-controls="datatable-keytable" tabindex="0"><a href="#">6</a></li><li class="paginate_button next" aria-controls="datatable-keytable" tabindex="0" id="datatable-keytable_next"><a href="#">Next</a></li></ul></div></div></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{ include('Bloques/pie.html.twig') }}
{% endblock %}
{% block javascripts %}
{{ parent() }}
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/jquery.dataTables.min.js') }}"></script>
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/dataTables.bootstrap.js') }}"></script>

        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/dataTables.buttons.min.js') }}"></script>
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/buttons.bootstrap.min.js') }}"></script>
        {#<script src="{{ asset('/mercurio/public/temporal/plugins/datatables/jszip.min.js') }}"></script>#}
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/pdfmake.min.js') }}"></script>
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/vfs_fonts.js') }}"></script>
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/buttons.html5.min.js') }}"></script>
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/buttons.print.min.js') }}"></script>
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/dataTables.fixedHeader.min.js') }}"></script>
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/dataTables.keyTable.min.js') }}"></script>
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/dataTables.responsive.min.js') }}"></script>
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/responsive.bootstrap.min.js') }}"></script>
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/dataTables.scroller.min.js') }}"></script>
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/dataTables.colVis.js') }}"></script>
        <script src="{{ asset('/mercurio/public/temporal/plugins/datatables/dataTables.fixedColumns.min.js') }}"></script>

        <script src="{{ asset('/mercurio/assets/pages/jquery.datatables.init.js') }}"></script>
{% endblock %}